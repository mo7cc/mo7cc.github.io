import{h as V,u as W,j as Z,k as X,l as ee,t as oe,m as se,p as C,q as f,s as e,v as te,x as ae,y as le,R as L,z as re,A as ce,B as ie,C as me,D as ne,E as F,F as $,G as ue,H as de,I as he,g as ve,L as pe,J as ge,K as _e,M as ye,N as T,O as ke,P as x}from"./app-CDcD9CqU.js";const be=["/","/bookmark/","/about/friend_links.html","/about/","/about/me.html","/about/website.html","/about/guestbook.html","/about/catalog.html","/coder/","/misc/ot-doc_ready.html","/misc/gfm_lang_demo.html","/misc/","/self_manage/procrastination_and_action.html","/self_manage/tomodoro_technique.html","/self_manage/fat_lose.html","/self_manage/shortcut_key_sync.html","/self_manage/shuang_pin_input.html","/self_manage/ria_f_read.html","/self_manage/","/theory/","/bookmark/links/document.html","/bookmark/links/","/bookmark/links/tools.html","/bookmark/book_list.html","/bookmark/books/","/bookmark/movies/","/bookmark/movies/forrest_gump.html","/bookmark/music/","/bookmark/music/music163_favorite.html","/bookmark/photos/bing_img_api.html","/bookmark/photos/","/bookmark/tools/","/bookmark/tools/u_tools.html","/bookmark/tools/text_num_add.html","/coder/basic/computer_and_os.html","/coder/basic/open_source.html","/coder/basic/dev_env_ready.html","/coder/basic/coding_market.html","/coder/basic/file_and_path.html","/coder/basic/file_utf8.html","/coder/basic/cmd_shell.html","/coder/basic/apt_homebrew.html","/coder/basic/git_github.html","/coder/basic/vscode.html","/coder/basic/search_engine.html","/coder/basic/proxy_to_net.html","/coder/basic/","/coder/javascript/nodejs_ready.html","/coder/javascript/fnm_ready.html","/coder/javascript/web_develop_ready.html","/coder/javascript/bun_ready.html","/coder/javascript/npm.html","/coder/javascript/pm2.html","/coder/javascript/","/coder/javascript/url_parse.html","/coder/leetcode/","/coder/go/golang_install.html","/coder/go/go_mongo.html","/coder/go/","/coder/go/golang_viewpoint.html","/coder/go/golang_shell.html","/coder/go/golang_command.html","/coder/go/golang_lib.html","/coder/go/golang_book.html","/coder/go/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84.html","/misc/essays/not_internet_developer.html","/misc/essays/elonmusk_saying.html","/misc/essays/","/misc/vuepress-hope/step_ready.html","/misc/vuepress-hope/img-preview.html","/misc/vuepress-hope/step_config.html","/misc/vuepress-hope/step_components.html","/misc/vuepress-hope/step_client.html","/misc/vuepress-hope/step_md_components.html","/misc/vuepress-hope/klipse.html","/misc/vuepress-hope/step_talk.html","/misc/vuepress-hope/step_icon_nav.html","/misc/vuepress-hope/step_deploy.html","/misc/vuepress-hope/","/coder/operations/proxy_v2rayn.html","/coder/operations/wsl2_ready.html","/coder/operations/wsl2_proxy.html","/coder/operations/ssh_jump_host.html","/coder/operations/","/bookmark/tools/vscode/vscode_ready.html","/bookmark/tools/vscode/vscode_common_plug.html","/bookmark/tools/vscode/vscode_web_front_vue.html","/bookmark/tools/vscode/vscode_golang.html","/bookmark/tools/vscode/vscode_remote.html","/bookmark/tools/vscode/vscode_Draw.html","/bookmark/tools/vscode/vscode_nginx.html","/bookmark/tools/vscode/vscode_edit_shell.html","/bookmark/tools/vscode/vscode_font_setting.html","/bookmark/tools/vscode/","/bookmark/tools/git/git_ready.html","/bookmark/tools/git/git_proxy.html","/bookmark/tools/git/git_command.html","/bookmark/tools/git/git_client.html","/bookmark/tools/git/git_flow.html","/bookmark/tools/git/","/coder/leetcode/threeSum.html","/coder/leetcode/twoSum.html","/coder/leetcode/trap.html","/coder/leetcode/groupAnagrams.html","/coder/leetcode/longestConsecutive.html","/coder/leetcode/maxArea.html","/coder/leetcode/moveZeroes.html","/coder/go/go-zero/","/coder/go/library/","/coder/operations/debian/","/coder/operations/debian/debian_ready.html","/coder/operations/debian/install_mongodb.html","/coder/operations/linux/curl_cert_issue.html","/coder/operations/linux/nginx_basic_use.html","/coder/operations/linux/","/coder/operations/linux/wsl2_install_desktop.html","/404.html","/category/","/category/%E5%85%B3%E4%BA%8Eabout/","/category/%E8%B5%84%E6%BA%90%E6%94%B6%E8%97%8Fbookmark/","/category/%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91coder/","/category/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%ABmisc/","/category/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86self-manage/","/category/%E7%90%86%E8%AE%BA%E7%A0%94%E7%A9%B6theory/","/tag/","/tag/markdown/","/tag/linux/","/tag/%E7%BC%96%E7%A8%8B/","/tag/%E5%88%86%E7%B1%BB/","/tag/%E5%B7%A5%E5%85%B7/","/tag/%E6%95%99%E7%A8%8B/","/tag/vuepress-hope/","/article/","/star/","/timeline/"],Ee="SLIMSEARCH_QUERY_HISTORY",_=T(Ee,[]),fe=()=>{const{queryHistoryCount:a}=x;return{enabled:a>0,queryHistories:_,addQueryHistory:i=>{_.value=Array.from(new Set([i,..._.value.slice(0,a-1)]))},removeQueryHistory:i=>{_.value=[..._.value.slice(0,i),..._.value.slice(i+1)]}}},Q=a=>be[a.id]+("anchor"in a?`#${a.anchor}`:""),xe="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=x,y=T(xe,[]),we=()=>({enabled:I>0,resultHistories:y,addResultHistory:c=>{{const i={link:Q(c),display:c.display};"header"in c&&(i.header=c.header),y.value=[i,...y.value.slice(0,I-1)]}},removeResultHistory:c=>{y.value=[...y.value.slice(0,c),...y.value.slice(c+1)]}}),Ae=a=>{const{page:c,routeLocale:i}=ue(),w=de(),l=C(0),k=f(()=>l.value>0),u=he([]);return ve(()=>{const{search:A,terminate:v}=pe(),b=_e(p=>{const{resultsFilter:B=t=>t,querySplitter:g,suggestionsFilter:q,...r}=w.value;p?(l.value+=1,A(p,i.value,r).then(t=>B(t,p,i.value,c.value)).then(t=>{l.value-=1,u.value=t}).catch(t=>{console.warn(t),l.value-=1,l.value||(u.value=[])})):u.value=[]},x.searchDelay-x.suggestDelay,{maxWait:5e3});ge([a,i],([p])=>b(p.join(" "))),ye(()=>{v()})}),{isSearching:k,results:u}};var He=V({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:c}){const i=W(),w=Z(),l=X(ee),{addQueryHistory:k,queryHistories:u,removeQueryHistory:A}=fe(),{resultHistories:v,addResultHistory:b,removeResultHistory:p}=we(),B=oe(a,"queries"),{results:g,isSearching:q}=Ae(B),r=se({isQuery:!0,index:0}),t=C(0),d=C(0),j=f(()=>u.value.length>0||v.value.length>0),H=f(()=>g.value.length>0),R=f(()=>g.value[t.value]||null),M=()=>{const{isQuery:o,index:s}=r;s===0?(r.isQuery=!o,r.index=o?v.value.length-1:u.value.length-1):r.index=s-1},O=()=>{const{isQuery:o,index:s}=r;s===(o?u.value.length-1:v.value.length-1)?(r.isQuery=!o,r.index=0):r.index=s+1},P=()=>{t.value=t.value>0?t.value-1:g.value.length-1,d.value=R.value.contents.length-1},U=()=>{t.value=t.value<g.value.length-1?t.value+1:0,d.value=0},Y=()=>{d.value<R.value.contents.length-1?d.value+=1:U()},z=()=>{d.value>0?d.value-=1:P()},S=o=>o.map(s=>ke(s)?s:e(s[0],s[1])),G=o=>{if(o.type==="customField"){const s=me[o.index]||"$content",[h,m=""]=ne(s)?s[w.value].split("$content"):s.split("$content");return o.display.map(n=>e("div",S([h,...n,m])))}return o.display.map(s=>e("div",S(s)))},E=()=>{t.value=0,d.value=0,c("updateQuery",""),c("close")},J=()=>e("div",{class:"slimsearch-records"},e("div",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},l.value.queryHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},u.value.map((o,s)=>{const h=r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h,onClick:()=>{c("updateQuery",o)}},e("div",[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},o),e("button",{type:"button",class:"slimsearch-remove-icon",title:l.value.remove,"aria-label":l.value.remove,innerHTML:$,onClick:m=>{m.preventDefault(),m.stopPropagation(),A(s)}})]))}))])),K=()=>e("ul",{class:"slimsearch-records"},e("li",{class:"slimsearch-record"},[e("div",{class:"slimsearch-record-title"},l.value.resultHistory),e("ul",{class:"slimsearch-record-contents",role:"listbox"},v.value.map((o,s)=>{const h=!r.isQuery&&r.index===s;return e("li",{class:["slimsearch-record-matches",{active:h}],role:"option","aria-selected":h},e(L,{to:o.link,onClick:()=>{E()}},()=>[e(F,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[o.header?e("div",{class:"slimsearch-record-content-header"},o.header):null,e("div",o.display.map(m=>S(m)).flat())]),e("button",{type:"button",class:"slimsearch-remove-icon",title:l.value.remove,"aria-label":l.value.remove,innerHTML:$,onClick:m=>{m.preventDefault(),m.stopPropagation(),p(s)}})]))}))]));return te("keydown",o=>{if(a.isFocusing){if(H.value){if(o.key==="ArrowUp")z();else if(o.key==="ArrowDown")Y();else if(o.key==="Enter"){const s=R.value.contents[d.value];k(a.queries.join(" ")),b(s),i.push(Q(s)),E()}}else if(o.key==="ArrowUp")M();else if(o.key==="ArrowDown")O();else if(o.key==="Enter"){const{index:s}=r;r.isQuery?(o.preventDefault(),c("updateQuery",u.value[s])):(i.push(v.value[s].link),E())}}}),ae([t,d],()=>{document.querySelector(".slimsearch-record.active .slimsearch-record-matches.active")?.scrollIntoView(!1)},{flush:"post"}),()=>e("div",{id:"slimsearch-results",class:["slimsearch-result-wrapper",{empty:a.queries.length?!H.value:!j.value}]},a.queries.length?q.value?e(le,{hint:l.value.searching}):H.value?e("div",{class:"slimsearch-records",role:"listbox","aria-labeledby":"slimsearch-label"},g.value.map(({title:o,contents:s},h)=>{const m=t.value===h;return e("div",{class:["slimsearch-record",{active:m}],role:"group","aria-selected":m},[e("div",{class:"slimsearch-record-title"},o||l.value.defaultTitle),e("ul",{class:"slimsearch-record-contents"},s.map((n,N)=>{const D=m&&d.value===N;return e("li",{class:["slimsearch-record-matches",{active:D}],role:"option","aria-selected":D},e(L,{to:Q(n),onClick:()=>{k(a.queries.join(" ")),b(n),E()}},()=>[n.type==="text"?null:e(n.type==="title"?re:n.type==="heading"?ce:ie,{class:"slimsearch-record-type"}),e("div",{class:"slimsearch-record-content"},[n.type==="text"&&n.header?e("div",{class:"slimsearch-record-content-header"},n.header):null,e("div",G(n))])]))}))])})):l.value.emptyResult:j.value?[J(),K()]:l.value.emptyHistory)}});export{He as default};
