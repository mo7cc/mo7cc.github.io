const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/APlayer.min-D8bNYxlc.js","assets/commonjsHelpers-Cpj98o6Y.js"])))=>i.map(i=>d[i]);
import{h as p,p as f,g as M,u as _,r as v,i as b,o as P,w as A,d as l,Q as g,S as h,b as w,_ as E,n as G}from"./app-CDcD9CqU.js";import{_ as x}from"./MyIcon.vue_vue_type_style_index_0_lang-M_6estlz.js";import{a as C}from"./index-C0RmN517.js";const S={class:"MyMusic"},N=p({__name:"NavMusic",setup(B){let i,a=f(!1),s=[];const m=()=>{a.value=!a.value},r=()=>{a.value&&(a.value=!1)},u=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const o=document.createElement("div");o.id="MyMusic_Menu",o.classList.add("nav-item"),o.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(o)}const t=document.querySelector("#MyMusic_Menu");t.onclick=o=>{m(),o.stopPropagation()};const n=document.querySelector(".MyMusic");n.onclick=o=>{o.stopPropagation()}},d=()=>{if(!i)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||s.length<1||(c(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new i({container:document.getElementById("GlobalAPlayer"),audio:s,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),e.GlobalAPlayer.on("play",function(){c()}),e.GlobalAPlayer.on("pause",function(){c()}))};function c(){const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(e.GlobalAPlayer.paused?document.getElementById("MyMusic_icon")?.setAttribute("spin","false"):document.getElementById("MyMusic_icon")?.setAttribute("spin","true"))}const y=e=>{C({method:"get",url:"//file.mo7.cc/music/list.json",params:{}}).then(t=>{var n=t.data;n&&n.length>0&&(s=n),console.log("加载音乐列表",s),e&&e()})};return M(()=>{const e=_();y(()=>{E(()=>import("./APlayer.min-D8bNYxlc.js").then(t=>t.A),__vite__mapDeps([0,1])).then(t=>{G(()=>{i=t.default,u(),d(),window.document.body.onclick=()=>{r()}}),e.afterEach(()=>{setTimeout(()=>{u(),d()},50)})})})}),(e,t)=>{const n=v("ClientOnly");return P(),b(n,null,{default:A(()=>[l("div",S,[l("div",{class:g(["MyMusic_Play",{hide:!h(a)}])},[l("div",{class:"close",onClick:r},[w(x,{name:"guanbi"})]),t[0]||(t[0]=l("div",{id:"GlobalAPlayer"},null,-1))],2)])]),_:1})}}});export{N as default};
